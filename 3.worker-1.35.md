#### Disabling SWAP
```bash
sudo swapoff -a
sed -e '/swap/s/^/#/g' -i /etc/fstab
```

#### Loading Kernel Modules
```bash
tee /etc/modules-load.d/modules.conf <<EOF
overlay
br_netfilter
EOF

modprobe overlay
modprobe br_netfilter

tee /etc/sysctl.d/kubernetes.conf <<EOF
net.bridge.bridge-nf-call-ip6tables = 1
net.bridge.bridge-nf-call-iptables = 1
net.ipv4.ip_forward = 1
EOF

sudo sysctl --system
```

#### Set Kubernetes and CRI-O Version
```bash
KUBERNETES_VERSION=v1.35
CRIO_VERSION=v1.35
```

#### Install all required packages
```bash
apt-get update -y
apt-get install -y software-properties-common curl

curl -fsSL https://pkgs.k8s.io/core:/stable:/$KUBERNETES_VERSION/deb/Release.key |
    gpg --dearmor -o /etc/apt/keyrings/kubernetes-apt-keyring.gpg

echo "deb [signed-by=/etc/apt/keyrings/kubernetes-apt-keyring.gpg] https://pkgs.k8s.io/core:/stable:/$KUBERNETES_VERSION/deb/ /" |
    tee /etc/apt/sources.list.d/kubernetes.list

curl -fsSL https://download.opensuse.org/repositories/isv:/cri-o:/stable:/$CRIO_VERSION/deb/Release.key |
    gpg --dearmor -o /etc/apt/keyrings/cri-o-apt-keyring.gpg

echo "deb [signed-by=/etc/apt/keyrings/cri-o-apt-keyring.gpg] https://download.opensuse.org/repositories/isv:/cri-o:/stable:/$CRIO_VERSION/deb/ /" |
    tee /etc/apt/sources.list.d/cri-o.list

sudo apt-get update -y
sudo apt-get install -y cri-o cri-tools kubelet kubeadm kubectl -y

sudo apt-mark hold kubelet kubeadm kubectl
sudo systemctl start crio.service
```

```bash
kubeadm join 192.168.29.51:6443 --token 0tpm7c.yxe1uqzh6ckopoml \
        --discovery-token-ca-cert-hash sha256:541e6d6e5d10ffaa5bd2b56f2e0c4c51906a75a853f8855d2623ffcf55a8d6fd
```
